{% extends 'base.html' %}

{% block title %}Employee Dashboard{% endblock %}

{% block content %}
<style>
    .dashboard-content {
        padding: 2rem;
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
    }

    .stats {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .stat-item {
        background-color: #fff;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        flex: 1;
        min-width: 200px;
        text-align: center;
    }

    .stat-item h3 {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        color: #007bff;
    }

    .stat-item p {
        font-size: 1rem;
        color: #6c757d;
    }

    .notice {
        margin-top: 1rem;
    }

    .read-more-btn {
        text-decoration: none;
        color: #007bff;
        font-weight: 600;
    }

    .read-more-btn i {
        margin-left: 0.5rem;
    }

    .calendar {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 1rem;
    }

    .calendar table {
        width: 100%;
        border-collapse: collapse;
    }

    .calendar th, .calendar td {
        padding: 0.5rem;
        text-align: center;
        border: 1px solid #dee2e6;
    }

    .calendar th {
        background-color: #007bff;
        color: #fff;
    }

    .calendar td.present {
        background-color: #d4edda;
    }

    .calendar td.absent {
        background-color: #f8d7da;
    }

    .calendar td.empty {
        background-color: #f8f9fa;
    }
</style>

<div class="dashboard-content">
    <div class="stats">
        <div class="stat-item">
            <h3><i class="fas fa-calendar-alt"></i> Leave Balance</h3>
            <p>{{ leave_balance }} days</p>
        </div>
        <div class="stat-item">
            <h3><i class="fas fa-tasks"></i> Pending Tasks</h3>
            <p>{{ pending_tasks }}</p>
        </div>
        <div class="stat-item">
            <h3><i class="fas fa-calendar-day"></i> Present Days</h3>
            <p>{{ present_days }}</p>
        </div>
        <div class="stat-item">
            <h3><i class="fas fa-calendar-times"></i> Absent Days</h3>
            <p>{{ absent_days }}</p>
        </div>
    </div>
    <hr/>
    <div class="stats">
        <div class="stat-item">
            <h2><i class="fas fa-bell"></i> Notice</h2>
            {% if first_notice %}
            <p>{{ first_notice.title }}</p>
            <div class="notice">
                <a href="{% url 'notice_detail' first_notice.id %}" class="read-more-btn">Read more <i class="fas fa-arrow-right"></i></a>
            </div>
            {% else %}
            <p>No notices available.</p>
            {% endif %}
        </div>
    </div>
    <hr/>
    <div class="calendar">
        <h3>Attendance Calendar</h3>
        <table>
            <thead>
                <tr>
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
            </thead>
            <tbody>
                {% for week in month_days %}
                <tr>
                    {% for day in week %}
                    {% if day == 0 %}
                    <td class="empty"></td>
                    {% else %}
                    <td class="{% if day in present_dates %}present{% elif day in absent_dates %}absent{% endif %}">{{ day }}</td>
                    {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
